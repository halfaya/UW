\documentclass[acmlarge,fleqn]{acmart}\settopmatter{}

%% Note: Authors migrating a paper from PACMPL format to traditional
%% SIGPLAN proceedings format should change 'acmlarge' to
%% 'sigplan,10pt'.


%% Some recommended packages.
\usepackage{booktabs}   %% For formal tables:
                        %% http://ctan.org/pkg/booktabs
\usepackage{subcaption} %% For complex figures with subfigures/subcaptions
                        %% http://ctan.org/pkg/subcaption
\usepackage{mathpartir}


\makeatletter\if@ACM@journal\makeatother
%% Journal information (used by PACMPL format)
%% Supplied to authors by publisher for camera-ready submission
\acmJournal{PACMPL}
\acmVolume{1}
\acmNumber{1}
\acmArticle{1}
\acmYear{2017}
\acmMonth{1}
\acmDOI{10.1145/nnnnnnn.nnnnnnn}
\startPage{1}
\else\makeatother
%% Conference information (used by SIGPLAN proceedings format)
%% Supplied to authors by publisher for camera-ready submission
\acmConference[PL'18]{ACM SIGPLAN Conference on Programming Languages}{January 01--03, 2018}{New York, NY, USA}
\acmYear{2018}
\acmISBN{978-x-xxxx-xxxx-x/YY/MM}
\acmDOI{10.1145/nnnnnnn.nnnnnnn}
\startPage{1}
\fi


%% Copyright information
%% Supplied to authors (based on authors' rights management selection;
%% see authors.acm.org) by publisher for camera-ready submission
\setcopyright{none}             %% For review submission
%\setcopyright{acmcopyright}
%\setcopyright{acmlicensed}
%\setcopyright{rightsretained}
%\copyrightyear{2017}           %% If different from \acmYear


%% Bibliography style
\bibliographystyle{ACM-Reference-Format}
%% Citation style
%% Note: author/year citations are required for papers published as an
%% issue of PACMPL.
\citestyle{acmauthoryear}   %% For author/year citations

\RequirePackage{ifthen}
\RequirePackage{amssymb}
\RequirePackage{amsfonts}
\RequirePackage{stmaryrd} % \shortuparrow


\input{macros}

% COVERED by option fleqn:
%
% controlling flushleft/center for math displays
% http://www.golatex.de/wechsel-zwischen-leqno-und-reqno-fleqn-uvm-t2488.html
\makeatletter
%\def\leqn{\tagsleft@true}
%\def\reqn{\tagsleft@false}
\def\fleq{\@fleqntrue\let\mathindent\@mathmargin \@mathmargin=\leftmargini}
\def\cneq{\@fleqnfalse}
\g@addto@macro{\endsubequations}{\addtocounter{equation}{-1}}
\makeatother

\begin{document}

%% Title information
\title[Type Differences]{Differences of Types}         %% [Short Title] is optional;
                                        %% when present, will be used in
                                        %% header instead of Full Title.
\titlenote{with title note}             %% \titlenote is optional;
                                        %% can be repeated if necessary;
                                        %% contents suppressed with 'anonymous'
\subtitle{Subtitle}                     %% \subtitle is optional
\subtitlenote{with subtitle note}       %% \subtitlenote is optional;
                                        %% can be repeated if necessary;
                                        %% contents suppressed with 'anonymous'


%% Author information
%% Contents and number of authors suppressed with 'anonymous'.
%% Each author should be introduced by \author, followed by
%% \authornote (optional), \orcid (optional), \affiliation, and
%% \email.
%% An author may have multiple affiliations and/or emails; repeat the
%% appropriate command.
%% Many elements are not rendered, but should be provided for metadata
%% extraction tools.

%% Author with single affiliation.
\author{John Leo}
\authornote{with author1 note}          %% \authornote is optional;
                                        %% can be repeated if necessary
\orcid{nnnn-nnnn-nnnn-nnnn}             %% \orcid is optional
\affiliation{
  \position{Position1}
  \department{Department1}              %% \department is recommended
  \institution{Halfaya Research}            %% \institution is required
  \streetaddress{Street1 Address1}
  \city{City1}
  \state{State1}
  \postcode{Post-Code1}
  \country{Country1}
}
\email{leo@halfaya.org}          %% \email is recommended

%% Author with two affiliations and emails.
\author{First2 Last2}
\authornote{with author2 note}          %% \authornote is optional;
                                        %% can be repeated if necessary
\orcid{nnnn-nnnn-nnnn-nnnn}             %% \orcid is optional
\affiliation{
  \position{Position2a}
  \department{Department2a}             %% \department is recommended
  \institution{Institution2a}           %% \institution is required
  \streetaddress{Street2a Address2a}
  \city{City2a}
  \state{State2a}
  \postcode{Post-Code2a}
  \country{Country2a}
}
\email{first2.last2@inst2a.com}         %% \email is recommended
\affiliation{
  \position{Position2b}
  \department{Department2b}             %% \department is recommended
  \institution{Institution2b}           %% \institution is required
  \streetaddress{Street3b Address2b}
  \city{City2b}
  \state{State2b}
  \postcode{Post-Code2b}
  \country{Country2b}
}
\email{first2.last2@inst2b.org}         %% \email is recommended


%% Paper note
%% The \thanks command may be used to create a "paper note" ---
%% similar to a title note or an author note, but not explicitly
%% associated with a particular element.  It will appear immediately
%% above the permission/copyright statement.
\thanks{with paper note}                %% \thanks is optional
                                        %% can be repeated if necesary
                                        %% contents suppressed with 'anonymous'


%% Abstract
%% Note: \begin{abstract}...\end{abstract} environment must come
%% before \maketitle command
\begin{abstract}
See Introduction.
\end{abstract}


%% 2012 ACM Computing Classification System (CSS) concepts
%% Generate at 'http://dl.acm.org/ccs/ccs.cfm'.
\begin{CCSXML}
<ccs2012>
<concept>
<concept_id>10011007.10011006.10011008</concept_id>
<concept_desc>Software and its engineering~General programming languages</concept_desc>
<concept_significance>500</concept_significance>
</concept>
<concept>
<concept_id>10003456.10003457.10003521.10003525</concept_id>
<concept_desc>Social and professional topics~History of programming languages</concept_desc>
<concept_significance>300</concept_significance>
</concept>
</ccs2012>
\end{CCSXML}

\ccsdesc[500]{Software and its engineering~General programming languages}
\ccsdesc[300]{Social and professional topics~History of programming languages}
%% End of generated code


%% Keywords
%% comma separated list
\keywords{Agda, Coq, dependent types, algebra of programming}  %% \keywords is optional


%% \maketitle
%% Note: \maketitle command must come after title commands, author
%% commands, abstract environment, Computing Classification System
%% environment and commands, and keywords command.
\maketitle


\section{Introduction}

This document is a place to record my thoughts on the Coq proof
repair project headed by Talia Ringer, Nate Yazdani, and Dan
Grossman.  Everything in it is preliminary.

For now I am using Agda Lite as described in the PhD thesis of Jesper
Cockx\\
(https://lirias.kuleuven.be/bitstream/123456789/583556/1/thesis-final-digital.pdf).
I am doing this for a number of practical reasons: Agda Lite is much
simpler than full Coq, but includes everything we use so far; Jesper
is particularly careful and detailed in his presentation; and the
thesis contains particular information and results (such as on
datatype eliminators and unification) that we might be able to take
advantage of.

I also have a selfish reason for using Agda Lite here: I'm also
working on another project with Jesper and others to specify ``Core
Agda'', and want to learn the material in the thesis in detail.  I'm
also personally more familiar and comfortable with Agda over Coq.  I
am always keeping Coq in mind as well, however, and it should be easy
to translate all of this to Coq when we need to.

\section{Differences of Types}

Dependently-typed functional programs and mathematical objects which
can be manipulated algebraically.  One algebraic operation that can be
performed is to take the difference of two types.  Given types $A : T$
and $B : T$ of the same sort $T$ this difference $B - A$ can be
expressed as a function from $A$ to $B$:
\[
f : A \to B
\]

TODO: Fix this.

This is really only interesting if both types are inhabited, and we
can also look at the difference between two terms of different types.
Given $a : A$ and $b : B$, express $b-a$ as
\begin{gather*}
f_{ab} : A \to B\\
f(a) = b
\end{gather*}
This function is again not unique in general, and in fact always has
the trivial solution $f_{ab}(\_) = b)$.

The existence of $a$ should provide some help in calculating $b$.  We
would like to capture somehow the notion of using $a$ ``maximally'',
and then defining $b-a$ to be the function that thus takes the minimal
amount of effort to go from $a$ to $b$.

Given that $a$ and $b$ are themselves algebraic structures, it should
be possible to quantify the size of a term as either the size or depth
of its AST.  Denote $|b|$ as the size of $b$.  Our definition of $b-a$
could then be a function $f_{ab} : A \to B$ such that $|f_{ab}(a)|$ is
minimal, where we set $|a|$ to be $1$.

Note that we do not say what happens when the argument to $f_{ab}$ is
not $a$.  We could arbitrarily set the output to $b$ always in this
case.  More interesting would be to handle any term of type $A$, using
only information about the types $A$ and $B$.  In this case we could
define $B - A$ to be any function $f : A \to B$ that minimizes
$|f(a)|$ for all $a \in A$, if such a function exists.

Note that this is all very vague and preliminary and might not make
much sense.  Certainly it seems doubtful $B - A$ would behave as a
true difference, so it might be better to use other notation and
terminology.

\section{Examples}

\subsection{Strengthened Conclusions}

All eight of the examples in the CSE 503 project, as well as most
later examples (such as oldMinimal/newMinimal in email) are of the
same form, which could be characterized as strengthening or in general
modifying the conclusion of a theorem given a set of hypthoses.  The
types involved are pi types, and we are given terms $a : (x : X) \to
A$ and $b : (x : X) \to B$ where $A$ and $B$ can depend on $x$.  Note
that $X$ is identical for both $a$ and $b$.  We view it here as a
single sigma type, but in the original form of the it is curried so
that $a$ and $b$ have pure pi types.



\subsection{Alternate Datatype Formulations}


\end{document}
